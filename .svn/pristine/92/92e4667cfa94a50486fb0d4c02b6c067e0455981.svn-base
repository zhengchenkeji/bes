package com.ruoyi.efounder.JEnterprise.controller.scheduling;

import com.ruoyi.common.annotation.Log;
import com.ruoyi.common.core.domain.AjaxResult;
import com.ruoyi.common.enums.BusinessType;
import com.ruoyi.common.utils.poi.ExcelUtil;
import com.ruoyi.efounder.JEnterprise.domain.SceneModelControl;
import com.ruoyi.efounder.JEnterprise.domain.SceneModelPointControl;
import com.ruoyi.efounder.JEnterprise.service.scheduling.SceneModelService;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.web.bind.annotation.*;

import javax.annotation.Resource;
import javax.servlet.http.HttpServletResponse;
import java.util.List;

/**
 * @Author:gaojikun
 * @Date:2022-11-08 11:11
 * @Description: 场景模式
 */
@RestController
@RequestMapping("/deviceManagement/scheduling/scenarioConfig/model")
public class SceneModelController {

    @Resource
    private SceneModelService sceneModelService;

    /**
     * @Description: 获取场景模式列表
     * @auther: gaojikun
     * @param: sceneModelControl
     * @return: AjaxResult
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:list')")
    @PostMapping("/getSceneModelList")
    public AjaxResult getSceneModelList(SceneModelControl sceneModelControl) {
        return sceneModelService.getSceneModelList(sceneModelControl);
    }

    /**
     * @Description: 根据id获取场景模式
     * @auther: gaojikun
     * @param: sceneControl
     * @return: AjaxResult
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:getSceneModel')")
    @PostMapping("/getSceneModel")
    public AjaxResult getSceneModel(SceneModelControl sceneModelControl) {
        return sceneModelService.getSceneModel(sceneModelControl);
    }

    /**
     * @Description: 添加场景模式
     * @auther: gaojikun
     * @param: sceneControl
     * @return: AjaxResult
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:add')")
    @PostMapping("/addSceneModel")
    public AjaxResult addSceneModel(SceneModelControl sceneModelControl) {
        return sceneModelService.addSceneModel(sceneModelControl);
    }

    /**
     * @Description: 修改场景模式
     * @auther: gaojikun
     * @param: sceneControl
     * @return: AjaxResult
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:edit')")
    @PostMapping("/updateSceneModel")
    public AjaxResult updateSceneModel(SceneModelControl sceneModelControl) {
        return sceneModelService.updateSceneModel(sceneModelControl);
    }

    /**
     * @Description: 删除场景模式
     * @auther: gaojikun
     * @param: ids
     * @return: AjaxResult
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:remove')")
    @DeleteMapping("/deleteSceneModel/{ids}")
    public AjaxResult deleteSceneModel(@PathVariable("ids") Long[] ids) {
        return sceneModelService.deleteSceneModel(ids);
    }

    /**
     * 导出场景模式列表
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:export')")
    @Log(title = "计划场景模式", businessType = BusinessType.EXPORT)
    @PostMapping("/export")
    public void export(HttpServletResponse response, SceneModelControl sceneModelControl)
    {
        List<SceneModelControl> list = sceneModelService.getSceneModelListReturnList(sceneModelControl);
        ExcelUtil<SceneModelControl> util = new ExcelUtil<>(SceneModelControl.class);
        util.exportExcel(response, list, "计划场景模式列表");
    }


    /**
     * @Description: 获取场景模式点位列表
     * @auther: gaojikun
     * @param: sceneModelPointControl
     * @return: AjaxResult
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:getSceneModelPoint')")
    @PostMapping("/getSceneModelPoint")
    public AjaxResult getSceneModelPoint(SceneModelPointControl sceneModelPointControl) {
        return sceneModelService.getSceneModelPoint(sceneModelPointControl);
    }

    /**
     * @Description: 添加场景模式点位配置
     * @auther: gaojikun
     * @param: sceneModelPointControl
     * @return: AjaxResult
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:addSceneModelPoint')")
    @PostMapping("/addSceneModelPoint")
    public AjaxResult addSceneModelPoint(SceneModelPointControl sceneModelPointControl) {
        return sceneModelService.addSceneModelPoint(sceneModelPointControl);
    }


    /**
     * @Description: 场景模式同步
     * @auther: gaojikun
     * @param: sceneModelPointControl
     * @return: AjaxResult
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:sync')")
    @PostMapping("/modelPointSync")
    public AjaxResult modelPointSync(SceneModelControl sceneModelControl) {
        return sceneModelService.modelPointSync(sceneModelControl);
    }

    /**
     * @Description: 模式数据对比
     * @auther: gaojikun
     * @param: sceneModelPointControl
     * @return: AjaxResult
     */
    @PreAuthorize("@ss.hasPermi('scheduling:sceneConfig:model:contrast')")
    @PostMapping("/modelPointContrast")
    public AjaxResult modelPointContrast(SceneModelControl sceneModelControl) {
        return sceneModelService.modelPointContrast(sceneModelControl);
    }
}
